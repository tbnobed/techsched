<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Backup Checklist</title>
    <style>
body {
    font-family: Arial, sans-serif;
    line-height: 1.6;
    color: #333;
    max-width: 800px;
    margin: 0 auto;
    padding: 20px;
}
h1, h2, h3, h4, h5, h6 {
    color: #2c3e50;
    margin-top: 1em;
    margin-bottom: 0.5em;
}
h1 {
    font-size: 28px;
    border-bottom: 1px solid #eee;
    padding-bottom: 10px;
}
h2 {
    font-size: 24px;
    border-bottom: 1px solid #eee;
    padding-bottom: 5px;
}
h3 { font-size: 20px; }
h4 { font-size: 18px; }
h5 { font-size: 16px; }
h6 { font-size: 14px; }
code {
    font-family: monospace;
    background-color: #f5f5f5;
    padding: 3px;
    border-radius: 3px;
}
pre {
    font-family: monospace;
    background-color: #f5f5f5;
    padding: 10px;
    border-radius: 5px;
    overflow-x: auto;
    white-space: pre-wrap;
}
a { color: #3498db; }
table {
    border-collapse: collapse;
    width: 100%;
    margin: 20px 0;
}
th, td {
    border: 1px solid #ddd;
    padding: 8px;
    text-align: left;
}
th {
    background-color: #f5f5f5;
    font-weight: bold;
}
tr:nth-child(even) { background-color: #f9f9f9; }
img {
    max-width: 100%;
    height: auto;
}
blockquote {
    margin: 0;
    padding-left: 15px;
    border-left: 4px solid #ddd;
    color: #666;
}
ul, ol {
    padding-left: 30px;
}
hr {
    border: 0;
    border-top: 1px solid #eee;
    margin: 20px 0;
}
.cover {
    text-align: center;
    margin-bottom: 50px;
}
.cover h1 {
    font-size: 36px;
    border-bottom: none;
}
.footer {
    margin-top: 50px;
    padding-top: 20px;
    border-top: 1px solid #eee;
    text-align: center;
    color: #777;
    font-size: 12px;
}
    </style>
</head>
<body>
    <div class="cover">
        <h1>Backup Checklist</h1>
        <p>Plex Engineering Documentation</p>
        <p>Generated on March 31, 2025</p>
    </div>
    
    <div class="content">
        <h1>Backup Checklist for Plex Technician Scheduler</h1>

<p>Before deploying updates to your production server, make sure you have backups of the following critical files and data:</p>

<h2>1. Database Backup</h2>

<p>The most important data to back up is your PostgreSQL database. Run the backup script to create a complete database dump:</p>

<pre><code>cd /opt/technician-scheduler
./backup.sh
</code></pre>

<p>Verify that both SQL dump and application JSON backup files were created:</p>
<pre><code>ls -la /var/lib/technician-scheduler/backups
</code></pre>

<h2>2. Custom Configuration Files</h2>

<p>Make sure you have backups of these key configuration files:</p>

<ul>
<li>`.env` file with environment variables and secrets</li>
<li>`docker-compose.yml` if you made any customizations</li>
<li>Any custom Nginx or reverse proxy configurations</li>
</ul>

<h2>3. Custom Static Files</h2>

<p>If you have any custom static files like logos or custom CSS, ensure they are backed up:</p>

<ul>
<li>`/opt/technician-scheduler/static/images/` directory</li>
<li>`/opt/technician-scheduler/static/css/` directory</li>
<li>`/opt/technician-scheduler/static/js/` directory</li>
</ul>

<h2>4. Backup Script Verification</h2>

<p>Test that your backups can be restored successfully:</p>

<pre><code># Create a test database
docker-compose exec db psql -U postgres -c "CREATE DATABASE backup_test;"

# Test restore to the test database
zcat /var/lib/technician-scheduler/backups/backup_YYYYMMDD_HHMMSS.sql.gz | \
  docker-compose exec -T db psql -U postgres -d backup_test

# Check if restore was successful
docker-compose exec db psql -U postgres -d backup_test -c "SELECT COUNT(*) FROM users;"

# Clean up test database
docker-compose exec db psql -U postgres -c "DROP DATABASE backup_test;"
</code></pre>

<h2>5. Offsite Backup</h2>

<p>For additional safety, copy your backup files to an external location:</p>

<pre><code># Copy latest backup to a secure offsite location
latest_backup=$(ls -t /var/lib/technician-scheduler/backups/backup_*.sql.gz | head -1)
latest_app_backup=$(ls -t /var/lib/technician-scheduler/backups/app_backup_*.json.gz | head -1)

# Using rsync to copy to another server
rsync -avz "$latest_backup" "$latest_app_backup" user@backup-server:/path/to/backup/

# OR using AWS S3
aws s3 cp "$latest_backup" s3://your-backup-bucket/technician-scheduler/
aws s3 cp "$latest_app_backup" s3://your-backup-bucket/technician-scheduler/
</code></pre>

<h2>6. Document Installation-Specific Customizations</h2>

<p>Before deploying, document any customizations specific to your installation:</p>

<ul>
<li>Custom cron jobs in `/etc/cron.d/` or user crontab</li>
<li>Custom system service configurations in `/etc/systemd/system/`</li>
<li>Any firewall rules or security settings specific to this application</li>
<li>Custom domain and SSL certificate configurations</li>
<li>Email notification settings and SendGrid configurations</li>
</ul>

<p>This checklist should be completed before any major update to ensure you can roll back if needed.</p>
    </div>
    
    <div class="footer">
        <p>Â© 2025 Plex Engineering - Documentation generated from markdown</p>
    </div>
</body>
</html>