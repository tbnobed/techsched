{% macro display_active_tickets() %}
    {# 
        This macro gets ALL active tickets (open, in_progress, pending) 
        for the sidebar, regardless of the main content filters.
        It's independent of dashboard filters.
    #}
    
    {# Use a custom helper function to get active tickets independently of dashboard filters #}
    {% set active_tickets = get_active_sidebar_tickets() %}
    
    {% if active_tickets %}
        {% for ticket in active_tickets %}
        <a href="{{ url_for('tickets.view_ticket', ticket_id=ticket.id) }}" 
           class="list-group-item list-group-item-action d-flex align-items-center">
            {% if ticket.priority == 3 %}
                <span class="badge bg-danger me-2">Urgent</span>
            {% elif ticket.priority == 2 %}
                <span class="badge bg-warning text-dark me-2">High</span>
            {% elif ticket.priority == 1 %}
                <span class="badge bg-info me-2">Medium</span>
            {% else %}
                <span class="badge bg-secondary me-2">Low</span>
            {% endif %}
            
            <div>
                <div class="fw-bold text-truncate" style="max-width: 190px;">{{ ticket.title }}</div>
                <small class="text-muted">
                    {% if ticket.status == 'open' %}
                        <i data-feather="inbox" class="me-1" style="width: 12px; height: 12px;"></i>New
                    {% elif ticket.status == 'in_progress' %}
                        <i data-feather="tool" class="me-1" style="width: 12px; height: 12px;"></i>In Progress
                    {% elif ticket.status == 'pending' %}
                        <i data-feather="clock" class="me-1" style="width: 12px; height: 12px;"></i>Pending
                    {% endif %}
                </small>
            </div>
        </a>
        {% endfor %}
    {% else %}
        <div class="list-group-item text-center text-muted">
            No active tickets
        </div>
    {% endif %}
{% endmacro %}